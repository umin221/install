webpackJsonp([6],{"3JSh":function(t,e,r){var o=r("Mc3n");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);r("rjj0")("7179ec72",o,!0)},A71v:function(t,e,r){t.exports=r("Trbc")(198)},Mc3n:function(t,e,r){(t.exports=r("FZ+f")(!1)).push([t.i,'\n@charset "UTF-8";\n/* ==================================================\n * \t\t\t \t\t 全局Sass变量\n * ================================================= */\n.mint-field-core {\n  text-align: right;\n}\n',""])},Wh3g:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=r("woOf"),s=r.n(o),n=r("Dd8w"),i=r.n(n),l=r("NYxO"),a=r("A71v"),d={name:"floor",created:function(){var t=this.$route.query;this.floor=KND.Util.parse(t.floor),this.floorName=this.floor[0]["Street Address 3"]},data:function(){return{floor:"",floorName:""}},methods:i()({},Object(l.mapActions)("floor",["upsertRoom","removeRoom"]),{saveFn:function(){this.upsertRoom(function(t,e){for(var r=[],o=0,s=t.length;o<s;o++){var n=t[o],i=n["Street Address 4"];r.push({Province:n.Province,Country:n.Country,County:n.County,"Street Address 2":n["Street Address 2"],"KL Building Number":n["KL Building Number"],"KL Room Number":n["KL Room Number"],"KL Floor Number":n["KL Floor Number"],City:n.City,"Street Address":n["Street Address"],Id:n["Personal Address Id"],"Street Address 4":i,"Street Address 3":e,"ListOfKL Install Order Asset":n["ListOfKL Install Order Asset"]})}return r}(this.floor,this.floorName))},addRoomFn:function(t){var e=KND.Util.now(),r=this.floor,o=s()({},r[r.length-1]);o["KL Room Number"]=parseInt(o["KL Room Number"],10)+1,o["Street Address 4"]=parseInt(o["Street Address 4"],10)+1,o["Personal Address Id"]=e,o["ListOfKL Install Order Asset"]={"KL Install Order Asset":{"Original Order Id":o["Original Order Id"],"KL Activity Id":o["KL Activity Id"],Id:e}},r.push(o)},removeFn:function(t,e){var r=this;t["Serial Number"]?Toast({message:"已绑定智能锁设备，不允许删除",position:"bottom"}):MessageBox.confirm("是否删除这个房间？","请确认").then(function(){var o=function(){return r.floor.splice(e,1)};console.log(t),t["ListOfKL Install Order Asset"]?o():r.removeRoom({data:{id:t.Id},success:function(t){o(),KND.Session.set("refreshAssets",!0)}})})}}),components:{buttonGroup:a.default}},u={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("mt-header",{attrs:{fixed:"",title:"楼层信息"}},[r("fallback",{attrs:{slot:"left"},slot:"left"}),t._v(" "),r("mt-button",{attrs:{slot:"right"},nativeOn:{click:function(e){t.saveFn(e)}},slot:"right"},[t._v("保存")])],1),t._v(" "),r("div",{staticClass:"mint-content building"},[r("mt-field",{attrs:{label:"楼层名称"},model:{value:t.floorName,callback:function(e){t.floorName=e},expression:"floorName"}}),t._v(" "),r("div",{staticStyle:{height:"5px"}}),t._v(" "),t._l(t.floor,function(e,o){return r("mt-cell-swipe",{key:o,attrs:{title:"房号"+e["KL Room Number"],right:[{content:"删除",style:{background:"red",color:"#fff"},handler:function(){return t.removeFn(e,o)}}]}},[r("input",{directives:[{name:"model",rawName:"v-model",value:e["Street Address 4"],expression:"room['Street Address 4']"}],staticClass:"mint-field-core",attrs:{type:"text"},domProps:{value:e["Street Address 4"]},on:{input:function(r){r.target.composing||t.$set(e,"Street Address 4",r.target.value)}}})])}),t._v(" "),r("button-group",[r("mt-button",{staticClass:"single",nativeOn:{click:function(e){t.addRoomFn(t.floorName)}}},[t._v("新增房间")])],1)],2)],1)},staticRenderFns:[]},c=r("VU/8")(d,u,!1,function(t){r("3JSh")},null,null);e.default=c.exports}});